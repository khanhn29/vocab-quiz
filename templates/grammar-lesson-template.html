<!DOCTYPE html>
<!--
GRAMMAR LESSON TEMPLATE - Ng·∫Øn g·ªçn ƒë·ªÉ tham kh·∫£o
====================================================

Thay th·∫ø c√°c variables:
- {{LESSON_TITLE}}: "Ng·ªØ ph√°p B√†i X: [t√™n b√†i]"
- {{HEADER_TITLE}}: "Ng·ªØ ph√°p B√†i X: [t√™n b√†i]"  
- {{LESSON_FULL_TITLE}}: "B√†i X: [t√™n b√†i] ([ti·∫øng Vi·ªát])"
- {{GRAMMAR_SECTIONS}}: N·ªôi dung c√°c sections ng·ªØ ph√°p

Icons th∆∞·ªùng d√πng:
‚ú®‚ùìüéØüìçüëÜüìå‚ùåüî¢üîó‚è∞üìùüí¨üîçüè¢

Structure: Kh√°i ni·ªám ‚Üí C√°ch s·ª≠ d·ª•ng ‚Üí V√≠ d·ª• ‚Üí Chi ti·∫øt th√™m
-->
<html lang="vi">
<head>
  <!-- Google tag (gtag.js) -->
  <script src="analytics.js"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{{LESSON_TITLE}} - Ti·∫øng H√†n Hyewon</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- Common CSS -->
  <link rel="stylesheet" href="css/grammar-common.css">
</head>
<body>
  <div class="header-bar">
    <button class="back-button" onclick="goToIndex()">
      <span class="back-arrow">‚Üê</span>
      <span>Quay l·∫°i</span>
    </button>
    <span class="lesson-title">{{LESSON_FULL_TITLE}}</span>
  </div>

  <div class="lesson-header">
    <p class="lesson-subtitle">Ng·ªØ Ph√°p Ti·∫øng H√†n T·ªïng H·ª£p S∆° C·∫•p 1</p>
  </div>

  <!-- Table of Contents -->
  <div class="table-of-contents">
    <h3 class="toc-title">
      <span class="toc-icon">üìö</span>
      N·ªôi dung b√†i h·ªçc
    </h3>
    <ul class="toc-list">
      {{TOC_ITEMS}}
      <!-- 
      V√≠ d·ª• TOC items:
      <li><a href="#section-1" class="toc-link">1. Grammar Point 1</a></li>
      <li><a href="#section-2" class="toc-link">2. Grammar Point 2</a></li>
      <li><a href="#practice" class="toc-link">üìù Luy·ªán t·∫≠p</a></li>
      -->
    </ul>
  </div>

  <!-- Grammar Sections -->
  {{GRAMMAR_SECTIONS}}
    
    <!-- 
    TEMPLATE REFERENCE:
    
    Basic Section:
    <div class="grammar-section" id="section-X">
      <h2 class="section-title">
        <span class="section-icon">[ICON]</span>
        [NUMBER]. [GRAMMAR_POINT] - [DESCRIPTION]
      </h2>
      
      <div class="grammar-point">
        <h3 class="point-title">a. [TITLE]</h3>
        <p class="point-description">[DESCRIPTION]</p>
        
        <div class="rule-box">
          <div class="rule-title">[ICON] [TITLE]:</div>
          [CONTENT - ul/li ho·∫∑c p]
        </div>

        <div class="example-box">
          <div class="example-title">üí° V√≠ d·ª•:</div>
          <div class="example-content">
            <p><span class="korean">[KOREAN_TEXT]</span> - [VIETNAMESE_TEXT]</p>
          </div>
        </div>
      </div>
      
      <!-- Th√™m subsections b, c n·∫øu c·∫ßn -->
      <!-- Th√™m table n·∫øu c·∫ßn: <table class="number-table"> -->
    </div>
    -->

    <!-- Practice Section -->
    <div class="practice-section">
      <h2 class="practice-title">
        <span class="practice-icon">üìù</span>
        Luy·ªán t·∫≠p
      </h2>
      <p class="practice-description">
        B·∫°n ƒë√£ h·ªçc xong ng·ªØ ph√°p {{LESSON_NUMBER}}. H√£y l√†m b√†i t·∫≠p ƒë·ªÉ c·ªßng c·ªë ki·∫øn th·ª©c!
      </p>
      <button class="practice-button" onclick="goToExercise()">
        L√†m b√†i t·∫≠p ngay
      </button>
    </div>

  <!-- Common JavaScript -->
  <script src="js/grammar-common.js"></script>
  <script>
    function goToExercise() {
      window.location.href = 'grammar-exercise.html?lesson={{LESSON_ID}}';
    }
    
    function goToIndex() {
      window.location.href = 'index.html';
    }

    // Enhanced animations and scroll effects
    document.addEventListener('DOMContentLoaded', function() {
      const tocLinks = document.querySelectorAll('.toc-link');
      const sections = document.querySelectorAll('.grammar-section');
      
      // Smooth scroll with offset
      tocLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const targetId = this.getAttribute('href');
          const targetElement = document.querySelector(targetId);
          
          if (targetElement) {
            // Calculate offset for fixed header
            const headerHeight = 90; // Adjust based on header height
            const elementPosition = targetElement.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.pageYOffset - headerHeight;
            
            window.scrollTo({
              top: offsetPosition,
              behavior: 'smooth'
            });
          }
        });
      });
      
      // Intersection Observer for scroll animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.animationPlayState = 'running';
            entry.target.classList.add('animate');
          }
        });
      }, observerOptions);

      // Observe all sections
      sections.forEach(section => {
        observer.observe(section);
      });

      // Add scroll progress indicator
      const createScrollProgress = () => {
        const progress = document.createElement('div');
        progress.className = 'scroll-progress';
        progress.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 0%;
          height: 3px;
          background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
          z-index: 9999;
          transition: width 0.1s ease;
        `;
        document.body.appendChild(progress);

        window.addEventListener('scroll', () => {
          const scrolled = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
          progress.style.width = scrolled + '%';
        });
      };

      createScrollProgress();
    });
  </script>
</body>
</html>
